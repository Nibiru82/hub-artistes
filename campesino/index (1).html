<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campesino : L'Exploration Interactive</title>
    <meta name="description" content="Explorez l'univers poétique et terre-à-terre de Campesino, entre rap et chanson française.">
    <meta name="keywords" content="Campesino, rap fr, LA FLEUR, LE BOURGEON, LA GRAINE, rap introspectif, chanson française">
    
    <link rel="icon" type="image/png" href="nibiru logo rap site.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1A202C; /* gray-900 */
            color: #E2E8F0; /* gray-200 */
        }
        .nav-link {
            position: relative;
            transition: color 0.3s;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #38A169; /* green-600 */
            transition: width 0.3s;
        }
        .nav-link.active, .nav-link:hover {
            color: #38A169;
        }
        .nav-link.active::after, .nav-link:hover::after {
            width: 100%;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1px;
            top: 2rem;
            width: 2px;
            height: calc(100% - 2rem);
            background-color: #2D3748; /* gray-800 */
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .timeline-dot {
            position: absolute;
            left: -8px;
            top: 2rem;
            width: 18px;
            height: 18px;
            background-color: #1A202C;
            border: 3px solid #38A169; /* green-600 */
            border-radius: 50%;
            z-index: 10;
        }
        .loader {
            border: 2px solid #4A5568; /* gray-600 */
            border-top: 2px solid #38A169; /* green-600 */
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .gemini-btn {
            background-image: linear-gradient(to right, #2F855A, #38A169);
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-gray-900/50 backdrop-blur-md sticky top-0 z-50 shadow-lg shadow-black/20">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-black tracking-tighter text-white">CAMPESINO</h1>
            <div id="nav-links" class="hidden md:flex items-center space-x-8 text-sm font-semibold uppercase tracking-wider text-gray-400">
                <a href="#introduction" data-section="introduction" class="nav-link active">Introduction</a>
                <a href="#parcours" data-section="parcours" class="nav-link">Parcours</a>
                <a href="#univers" data-section="univers" class="nav-link">Univers</a>
                <a href="#sonorites" data-section="sonorites" class="nav-link">Sonorités</a>
            </div>
             <button id="mobile-menu-button" class="md:hidden text-gray-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden bg-gray-800 p-4">
             <a href="#introduction" data-section="introduction" class="block py-2 text-center nav-link-mobile">Introduction</a>
             <a href="#parcours" data-section="parcours" class="block py-2 text-center nav-link-mobile">Parcours</a>
             <a href="#univers" data-section="univers" class="block py-2 text-center nav-link-mobile">Univers</a>
             <a href="#sonorites" data-section="sonorites" class="block py-2 text-center nav-link-mobile">Sonorités</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-16">

        <section id="introduction" class="content-section active">
            <div class="text-center max-w-4xl mx-auto">
                <h2 class="text-4xl md:text-6xl font-black tracking-tighter text-white leading-tight">LE RAP QUI PREND RACINE</h2>
                <p class="mt-4 text-lg md:text-xl text-gray-400">Une poésie du quotidien, entre la mélancolie des villes et la chaleur de la terre.</p>
                <div class="mt-12 bg-gray-800/50 p-8 rounded-xl shadow-lg border border-gray-700">
                    <p class="text-2xl md:text-3xl font-semibold italic text-green-400">« J’ai mis du temps à faire la paix, c’est p’t-être pour ça qu’autour de moi tout pousse. »</p>
                    <p class="mt-2 text-sm text-gray-500">- Inspiré de son univers</p>
                </div>
                <div class="mt-12 text-left text-base text-gray-300 leading-relaxed space-y-4">
                    <p>Campesino, de l'espagnol "paysan", est un artiste qui cultive sa différence. Loin des clichés du rap, il propose une musique authentique et sensible, profondément ancrée dans le réel. Ses textes, à la frontière de la chanson française, explorent avec une justesse rare les thèmes de la nostalgie, de la nature et du temps qui passe.</p>
                    <p>Cette page vous invite à explorer les sillons de son œuvre. Découvrez son parcours marqué par une métaphore végétale constante (de la graine à la fleur), analysez les concepts qui nourrissent sa poésie, et plongez dans sa signature sonore unique, à la fois brute et délicate.</p>
                </div>
            </div>
        </section>

        <section id="parcours" class="content-section">
             <div class="text-center max-w-3xl mx-auto">
                <h2 class="text-4xl md:text-5xl font-black tracking-tighter text-white">Parcours</h2>
                <p class="mt-4 text-lg text-gray-400">Une chronologie de l'éclosion artistique de Campesino. Cliquez sur un projet pour l'explorer et générer une analyse par l'IA.</p>
            </div>
            <div class="mt-16 max-w-5xl mx-auto">
                <div id="timeline" class="relative border-l-2 border-gray-700 ml-4 py-4"></div>
                <div id="timeline-details" class="mt-8"></div>
            </div>
        </section>

        <section id="univers" class="content-section">
            <div class="text-center max-w-3xl mx-auto">
                <h2 class="text-4xl md:text-5xl font-black tracking-tighter text-white">L'Univers Organique</h2>
                <p class="mt-4 text-lg text-gray-400">Plongez au cœur des concepts qui façonnent la musique de Campesino. Cliquez sur un thème pour en lire l'explication, puis utilisez l'IA pour une analyse plus profonde.</p>
            </div>
            <div id="univers-grid" class="mt-16 grid grid-cols-1 md:grid-cols-2 gap-8">
                 </div>
        </section>

        <section id="sonorites" class="content-section">
             <div class="text-center max-w-3xl mx-auto">
                <h2 class="text-4xl md:text-5xl font-black tracking-tighter text-white">Signature Sonore</h2>
                <p class="mt-4 text-lg text-gray-400">La palette sonore de Campesino est un mélange de productions minimalistes, d'influences lofi et d'une diction qui se rapproche du "parlé-chanté".</p>
            </div>
            <div class="mt-16 grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div class="space-y-6">
                    <div>
                        <h3 class="text-2xl font-bold text-green-400">La "Chanson-Rap"</h3>
                        <p class="mt-2 text-gray-300 leading-relaxed">Campesino se situe à la croisée des chemins. Ses productions, souvent épurées et portées par des mélodies simples à la guitare ou au piano, servent de support à un flow posé, presque murmuré. Cette approche met en valeur la qualité de ses textes, créant un format hybride qui emprunte autant à la tradition de la chanson française qu'au rap contemporain.</p>
                    </div>
                     <div>
                        <h3 class="text-2xl font-bold text-green-400">La Chaleur de l'Organique</h3>
                        <p class="mt-2 text-gray-300 leading-relaxed">Contrairement à de nombreuses productions actuelles, le son de Campesino privilégie une texture "organique". Le son est souvent brut, avec des imperfections assumées qui lui donnent une chaleur et une authenticité. Cette approche "lofi" renforce le lien avec le réel et les thèmes terre-à-terre de sa musique.</p>
                    </div>
                </div>
                <div>
                     <div class="chart-container" style="position: relative; height:60vh; width:80vw; max-width: 500px;">
                        <canvas id="styleChart"></canvas>
                    </div>
                    <p class="text-center text-sm text-gray-500 mt-4">Analyse de la palette sonore de Campesino.</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center py-8 mt-16 border-t border-gray-800">
        <p class="text-sm text-gray-500">Une exploration interactive de l'univers de Campesino.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            async function fetchFromGemini(prompt) {
                try {
                    const response = await fetch('/api/gemini-proxy', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ prompt: prompt })
                    });
                    if (!response.ok) {
                       const errorData = await response.json();
                       throw new Error(`Erreur du serveur proxy: ${errorData.error?.message || response.statusText}`);
                    }
                    return await response.json();
                } catch (error) {
                    console.error("Erreur d'appel à l'API Gemini:", error);
                    return { error: `Une erreur est survenue lors de la connexion à l'IA. Détails: ${error.message}` };
                }
            }
            
            async function generateAndDisplay(button, outputDiv, prompt) {
                button.disabled = true;
                outputDiv.style.display = 'block';
                outputDiv.innerHTML = '<div class="flex items-center gap-2"><div class="loader"></div><span>Analyse en cours...</span></div>';

                const result = await fetchFromGemini(prompt);
                
                if (result.error) {
                    outputDiv.innerHTML = result.error;
                } else if (result.candidates && result.candidates[0]?.content?.parts[0]?.text) {
                    outputDiv.innerHTML = result.candidates[0].content.parts[0].text.replace(/\n/g, '<br>');
                } else {
                    outputDiv.innerHTML = "Désolé, la réponse de l'IA est invalide ou vide.";
                }
                button.textContent = 'Analyse générée ✨';
            }

            const sections = document.querySelectorAll('.content-section');
            const navLinks = document.querySelectorAll('#nav-links .nav-link');
            const mobileNavLinks = document.querySelectorAll('#mobile-menu .nav-link-mobile');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            // Données spécifiques à Campesino
            const timelineData = [
                { year: '2022', title: '15 m2', type: 'EP', description: "Le projet fondateur qui introduit l'auditeur à l'univers de Campesino. Des productions mélancoliques et des textes introspectifs qui posent les bases de son esthétique terre-à-terre." },
                { year: '2023', title: 'LA GRAINE', type: 'EP', description: "Comme son nom l'indique, ce projet symbolise la croissance. Les thèmes de l'ambition et des racines y sont explorés avec une maturité grandissante." },
                { year: '2023', title: 'CIGALE', type: 'EP', description: "Un EP aux sonorités plus estivales et lumineuses, qui évoque la chaleur du sud et une certaine nostalgie, tout en conservant sa plume poétique." },
                { year: '2024', title: 'LE BOURGEON', type: 'EP', description: "Poursuivant la métaphore de la croissance, 'LE BOURGEON' présente un artiste en pleine éclosion, avec des morceaux plus personnels et affirmés." },
                { year: '2025', title: 'LA FLEUR', type: 'EP', description: "L'aboutissement d'un cycle. Ce projet est une démonstration de sa palette artistique complète, mêlant la mélancolie de ses débuts à une confiance nouvelle." }
            ];

            const universData = [
                {
                    title: "La Métaphore Végétale",
                    description: "L'œuvre de Campesino est traversée par une puissante métaphore de la croissance : LA GRAINE (2023), LE BOURGEON (2024), et enfin LA FLEUR (2025). Cette progression symbolise son évolution personnelle et artistique, un parcours patient et organique, de la promesse à l'épanouissement. C'est une manière poétique de lier son art au cycle de la nature.",
                    prompt: "En tant que critique littéraire, analyse en 3 phrases la 'métaphore végétale' (Graine, Bourgeon, Fleur) dans la discographie de Campesino. Explique ce qu'elle symbolise."
                },
                {
                    title: "Le Spleen Solaire",
                    description: "La musique de Campesino est marquée par une dualité fascinante : le 'spleen solaire'. C'est une mélancolie qui n'est pas sombre ou froide, mais plutôt empreinte de la chaleur d'un souvenir d'été, comme l'évoque l'EP 'CIGALE'. Ses textes abordent des thèmes tristes ou nostalgiques, mais toujours avec une lueur d'espoir et une douceur réconfortante.",
                    prompt: "Explique en 3 phrases le concept de 'spleen solaire' dans la musique de Campesino. Comment arrive-t-il à mêler la mélancolie et une certaine chaleur ?"
                }
            ];

            function switchSection(sectionId) {
                sections.forEach(s => s.classList.remove('active'));
                document.getElementById(sectionId)?.classList.add('active');
                navLinks.forEach(l => l.classList.toggle('active', l.dataset.section === sectionId));
            }

            function setupNav(links) {
                links.forEach(link => link.addEventListener('click', e => {
                    e.preventDefault();
                    switchSection(link.dataset.section);
                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                    }
                }));
            }

            setupNav(navLinks);
            setupNav(mobileNavLinks);
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

            const timelineContainer = document.getElementById('timeline');
            const timelineDetailsContainer = document.getElementById('timeline-details');
            timelineData.forEach(item => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item relative pl-8 pb-12 cursor-pointer';
                timelineItem.innerHTML = `<div class="timeline-dot"></div><p class="text-sm text-green-500 font-semibold">${item.year}</p><h3 class="text-xl font-bold text-gray-100">${item.title}</h3><p class="text-md text-gray-400">${item.type}</p>`;
                timelineItem.addEventListener('click', () => {
                    timelineDetailsContainer.innerHTML = `<div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700"><h3 class="text-2xl font-bold text-white">${item.title} (${item.year})</h3><p class="mt-2 text-gray-300">${item.description}</p><div class="mt-4"><button class="gemini-btn text-white px-4 py-2 rounded-md font-semibold hover:opacity-90 transition-opacity flex items-center gap-2">✨ Générer une analyse</button><div class="gemini-project-output mt-4 text-sm text-gray-400 border-l-4 border-green-500 pl-4" style="display: none;"></div></div></div>`;
                    const geminiBtn = timelineDetailsContainer.querySelector('.gemini-btn');
                    const outputDiv = timelineDetailsContainer.querySelector('.gemini-project-output');
                    geminiBtn.addEventListener('click', () => {
                        const prompt = `Rédige une courte analyse critique (environ 50-70 mots) du projet '${item.title}' de Campesino, en te basant sur cette description : '${item.description}'. Mets en lumière son ambiance et ses thèmes.`;
                        generateAndDisplay(geminiBtn, outputDiv, prompt);
                    });
                });
                timelineContainer.appendChild(timelineItem);
            });
            if (timelineContainer.firstElementChild) timelineContainer.firstElementChild.click();

            const universGrid = document.getElementById('univers-grid');
            universData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700';
                card.innerHTML = `<h3 class="text-2xl font-bold text-white">${item.title}</h3><p class="mt-2 text-gray-300 leading-relaxed">${item.description}</p><div class="mt-4"><button class="gemini-btn text-white px-4 py-2 rounded-md font-semibold hover:opacity-90 transition-opacity flex items-center gap-2">✨ Analyser le concept</button><div class="gemini-univers-output mt-4 text-sm text-gray-400 border-l-4 border-green-500 pl-4" style="display: none;"></div></div>`;
                const geminiBtn = card.querySelector('.gemini-btn');
                const outputDiv = card.querySelector('.gemini-univers-output');
                geminiBtn.addEventListener('click', () => {
                    generateAndDisplay(geminiBtn, outputDiv, item.prompt);
                });
                universGrid.appendChild(card);
            });
            
            const ctx = document.getElementById('styleChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Poétique', 'Mélancolique', 'Authentique', 'Organique', 'Introspectif', 'Flow Murmuré'],
                    datasets: [
                        { 
                            label: 'Style Campesino', 
                            data: [9, 7, 9, 8, 8, 7], 
                            backgroundColor: 'rgba(56, 161, 105, 0.2)', 
                            borderColor: 'rgba(56, 161, 105, 1)', 
                            pointBackgroundColor: 'rgba(56, 161, 105, 1)', 
                            pointBorderColor: '#fff', 
                            borderWidth: 2 
                        }
                    ]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    scales: { r: { angleLines: { color: 'rgba(255, 255, 255, 0.2)' }, grid: { color: 'rgba(255, 255, 255, 0.2)' }, pointLabels: { font: { size: 12, weight: 'bold' }, color: '#CBD5E0' }, ticks: { display: false, backdropColor: 'transparent' } } },
                    plugins: { legend: { display: false } }
                }
            });

            switchSection('introduction');
        });
    </script>
</body>
</html>
